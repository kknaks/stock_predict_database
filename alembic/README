# Alembic ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

## ğŸ“‹ ê¸°ë³¸ ëª…ë ¹ì–´

### 1. ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±
```bash
# ëª¨ë¸ ë³€ê²½ì‚¬í•­ ìë™ ê°ì§€í•´ì„œ ìƒì„±
poetry run alembic revision --autogenerate -m "ì„¤ëª…"

# ë¹ˆ ë§ˆì´ê·¸ë ˆì´ì…˜ ìˆ˜ë™ ìƒì„±
poetry run alembic revision -m "ì„¤ëª…"
```

### 2. ë§ˆì´ê·¸ë ˆì´ì…˜ ì ìš© (Upgrade)
```bash
# ìµœì‹  ë²„ì „ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ
poetry run alembic upgrade head

# í•œ ë‹¨ê³„ ì—…ê·¸ë ˆì´ë“œ
poetry run alembic upgrade +1

# íŠ¹ì • ë²„ì „ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ
poetry run alembic upgrade <revision_id>
```

### 3. ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡¤ë°± (Downgrade)
```bash
# í•œ ë‹¨ê³„ ë¡¤ë°±
poetry run alembic downgrade -1

# ì²˜ìŒìœ¼ë¡œ ë¡¤ë°± (ëª¨ë“  í…Œì´ë¸” ì‚­ì œ)
poetry run alembic downgrade base

# íŠ¹ì • ë²„ì „ìœ¼ë¡œ ë¡¤ë°±
poetry run alembic downgrade <revision_id>
```

### 4. í˜„ì¬ ìƒíƒœ í™•ì¸
```bash
# í˜„ì¬ ì ìš©ëœ ë²„ì „ í™•ì¸
poetry run alembic current

# ë§ˆì´ê·¸ë ˆì´ì…˜ íˆìŠ¤í† ë¦¬ ë³´ê¸°
poetry run alembic history

# ìì„¸í•œ íˆìŠ¤í† ë¦¬
poetry run alembic history --verbose
```

### 5. SQL ë¯¸ë¦¬ë³´ê¸° (ì‹¤ì œ ì ìš© X)
```bash
# ì—…ê·¸ë ˆì´ë“œ SQL í™•ì¸
poetry run alembic upgrade head --sql

# ë‹¤ìš´ê·¸ë ˆì´ë“œ SQL í™•ì¸
poetry run alembic downgrade -1 --sql
```

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **ìš´ì˜ DB ì‘ì—… ì „** ë°˜ë“œì‹œ ë°±ì—…
2. **autogenerateëŠ” ì™„ë²½í•˜ì§€ ì•ŠìŒ** - ìƒì„±ëœ íŒŒì¼ ê²€í†  í•„ìˆ˜
3. **ë¡¤ë°± í…ŒìŠ¤íŠ¸** - ìš´ì˜ ì ìš© ì „ downgrade í…ŒìŠ¤íŠ¸ ê¶Œì¥

---

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
alembic/
â”œâ”€â”€ env.py              â† í™˜ê²½ ì„¤ì • (DB ì—°ê²°)
â”œâ”€â”€ script.py.mako      â† ë§ˆì´ê·¸ë ˆì´ì…˜ í…œí”Œë¦¿
â”œâ”€â”€ README              â† ì´ íŒŒì¼
â””â”€â”€ versions/           â† ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ë“¤
    â””â”€â”€ xxxx_description.py
```
